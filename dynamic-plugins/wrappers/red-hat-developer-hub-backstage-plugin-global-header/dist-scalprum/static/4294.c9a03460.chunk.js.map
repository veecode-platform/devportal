{"version":3,"file":"static/4294.c9a03460.chunk.js","mappings":"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","sources":["webpack://red-hat-developer-hub.backstage-plugin-global-header/../../node_modules/@backstage/core-plugin-api/dist/translation/useTranslationRef.esm.js","webpack://red-hat-developer-hub.backstage-plugin-global-header/../../node_modules/@backstage/core-plugin-api/dist/translation/TranslationRef.esm.js","webpack://red-hat-developer-hub.backstage-plugin-global-header/../../node_modules/react/jsx-runtime.js","webpack://red-hat-developer-hub.backstage-plugin-global-header/../../node_modules/@backstage/core-plugin-api/dist/translation/TranslationResource.esm.js","webpack://red-hat-developer-hub.backstage-plugin-global-header/../../node_modules/react/cjs/react-jsx-runtime.production.min.js","webpack://red-hat-developer-hub.backstage-plugin-global-header/../../node_modules/@backstage/core-plugin-api/dist/apis/definitions/TranslationApi.esm.js"],"sourcesContent":["import { useState, useMemo, useCallback, useEffect, useRef } from 'react';\nimport { useApi } from '../apis/system/useApi.esm.js';\nimport '../apis/definitions/auth.esm.js';\nimport '../apis/definitions/AlertApi.esm.js';\nimport '../apis/definitions/AnalyticsApi.esm.js';\nimport '../apis/definitions/AppThemeApi.esm.js';\nimport '../apis/definitions/ConfigApi.esm.js';\nimport '../apis/definitions/DiscoveryApi.esm.js';\nimport { errorApiRef } from '../apis/definitions/ErrorApi.esm.js';\nimport '../apis/definitions/FeatureFlagsApi.esm.js';\nimport '../apis/definitions/FetchApi.esm.js';\nimport '../apis/definitions/IdentityApi.esm.js';\nimport '../apis/definitions/OAuthRequestApi.esm.js';\nimport '../apis/definitions/StorageApi.esm.js';\nimport { translationApiRef } from '../apis/definitions/TranslationApi.esm.js';\nimport '../apis/definitions/AppLanguageApi.esm.js';\n\nconst loggedRefs = /* @__PURE__ */ new WeakSet();\nconst useTranslationRef = (translationRef) => {\n  const errorApi = useApi(errorApiRef);\n  const translationApi = useApi(translationApiRef);\n  const [snapshot, setSnapshot] = useState(\n    () => translationApi.getTranslation(translationRef)\n  );\n  const observable = useMemo(\n    () => translationApi.translation$(translationRef),\n    [translationApi, translationRef]\n  );\n  const onError = useCallback(\n    (error) => {\n      if (!loggedRefs.has(translationRef)) {\n        const errMsg = `Failed to load translation resource '${translationRef.id}'; caused by ${error}`;\n        console.error(errMsg);\n        errorApi.post(new Error(errMsg));\n        loggedRefs.add(translationRef);\n      }\n    },\n    [errorApi, translationRef]\n  );\n  useEffect(() => {\n    const subscription = observable.subscribe({\n      next(next) {\n        if (next.ready) {\n          setSnapshot(next);\n        }\n      },\n      error(error) {\n        onError(error);\n      }\n    });\n    return () => {\n      subscription.unsubscribe();\n    };\n  }, [observable, onError]);\n  const initialRenderRef = useRef(true);\n  useEffect(() => {\n    if (initialRenderRef.current) {\n      initialRenderRef.current = false;\n    } else {\n      setSnapshot(translationApi.getTranslation(translationRef));\n    }\n  }, [translationApi, translationRef]);\n  if (!snapshot.ready) {\n    throw new Promise((resolve) => {\n      const subscription = observable.subscribe({\n        next(next) {\n          if (next.ready) {\n            subscription.unsubscribe();\n            resolve();\n          }\n        },\n        error(error) {\n          subscription.unsubscribe();\n          onError(error);\n          resolve();\n        }\n      });\n    });\n  }\n  return { t: snapshot.t };\n};\n\nexport { useTranslationRef };\n//# sourceMappingURL=useTranslationRef.esm.js.map\n","import { createTranslationResource } from './TranslationResource.esm.js';\n\nfunction flattenMessages(nested) {\n  const entries = new Array();\n  function visit(obj, prefix) {\n    for (const [key, value] of Object.entries(obj)) {\n      if (typeof value === \"string\") {\n        entries.push([prefix + key, value]);\n      } else {\n        visit(value, `${prefix}${key}.`);\n      }\n    }\n  }\n  visit(nested, \"\");\n  return Object.fromEntries(entries);\n}\nclass TranslationRefImpl {\n  #id;\n  #messages;\n  #resources;\n  constructor(options) {\n    this.#id = options.id;\n    this.#messages = flattenMessages(\n      options.messages\n    );\n  }\n  $$type = \"@backstage/TranslationRef\";\n  version = \"v1\";\n  get id() {\n    return this.#id;\n  }\n  get T() {\n    throw new Error(\"Not implemented\");\n  }\n  getDefaultMessages() {\n    return this.#messages;\n  }\n  setDefaultResource(resources) {\n    this.#resources = resources;\n  }\n  getDefaultResource() {\n    return this.#resources;\n  }\n  toString() {\n    return `TranslationRef{id=${this.id}}`;\n  }\n}\nfunction createTranslationRef(config) {\n  const ref = new TranslationRefImpl(config);\n  if (config.translations) {\n    ref.setDefaultResource(\n      createTranslationResource({\n        ref,\n        translations: config.translations\n      })\n    );\n  }\n  return ref;\n}\n\nexport { createTranslationRef };\n//# sourceMappingURL=TranslationRef.esm.js.map\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","function createTranslationResource(options) {\n  return {\n    $$type: \"@backstage/TranslationResource\",\n    version: \"v1\",\n    id: options.ref.id,\n    resources: Object.entries(options.translations).map(\n      ([language, loader]) => ({\n        language,\n        loader: () => loader().then((m) => {\n          const value = m.default;\n          return {\n            messages: value?.$$type === \"@backstage/TranslationMessages\" ? value.messages : value\n          };\n        })\n      })\n    )\n  };\n}\n\nexport { createTranslationResource };\n//# sourceMappingURL=TranslationResource.esm.js.map\n","/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","import { createApiRef } from '@backstage/core-plugin-api';\n\nconst translationApiRef = createApiRef({\n  id: \"core.translation\"\n});\n\nexport { translationApiRef };\n//# sourceMappingURL=TranslationApi.esm.js.map\n"],"names":["loggedRefs","WeakSet","useTranslationRef","translationRef","errorApi","translationApi","snapshot","setSnapshot","useState","getTranslation","observable","useMemo","translation$","onError","useCallback","error","has","errMsg","id","console","post","Error","add","useEffect","subscription","subscribe","next","ready","unsubscribe","initialRenderRef","useRef","current","Promise","resolve","t","TranslationRefImpl","constructor","options","this","nested","entries","Array","visit","obj","prefix","key","value","Object","push","fromEntries","flattenMessages","messages","$$type","version","T","getDefaultMessages","setDefaultResource","resources","getDefaultResource","toString","createTranslationRef","config","ref","translations","module","exports","createTranslationResource","map","language","loader","then","m","default","f","k","Symbol","for","l","prototype","hasOwnProperty","n","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentOwner","p","__self","__source","q","c","a","g","b","d","e","h","call","defaultProps","$$typeof","type","props","_owner","Fragment","jsx","jsxs","translationApiRef","createApiRef"],"sourceRoot":""}